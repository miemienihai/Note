# 数据库的开发有一系列的流程
+ 最重要的两个步骤莫过于 :第一我们要把用户的需求 用E-R模型来表现用户的需求的各个关系, 第二个我们要把E-R所得模型装换成我们需要的表结构
+ 我们设计出来的表 注重他的数据库数据的存取效率 , 空间的利用率,运行和管理的效率
+ 还要我们要求应用程序和数据库同时开发

+ p208 整个流程图介绍

## 第一步 需求分析(最重要的一步) 我们的目的是获得数据字典
+ 只有了解客户的需求才能设计一个合格的数据库
+ SA 方法分析
+ 调查结构的总体情况
+ 首席业务流程
+ 明确用户的需求
+ 确定系统边界 构建数据字典 一本用户需求的说明书, 我们获得的数据字典,需求对照用户的需求的字典进行更改.


### 数据字典 
+ 数据字典由下面的所组成
+ 数据项: 整个数据字典中最小的单位,包含了你加入的数据的全面信息
+ 数据结构: 描述数据项的组合关系,我们一般让应用程序员填写信息,不是单个的数据项,而是(学号,姓名) 这种组合
+ 数据流: 数据的去向
+ 数据存储: 存取频度,存取方式(文档)
+ 处理过程: 简述这个数据处理的过程和应用程序所运用的功能.

---
## 第二步 概念模型 目的是构建E-R 图表
+ E-R图表相较于上面 类似于文件的描述,更加形象,直观,同时可以让客户也能看懂.

### E-R图表的各个属性
+ 实体:用矩形来表示,实体名写在矩形框中
+ 属性 :用椭圆来表示,同样写在里面
+ 联系 : 用菱形来表示, 比如供应商和客户这两个实体,我们的联系名就叫做 供应.
+ 联系的属性: 我们在菱形下面再接一个椭圆,就代表了联系的属性,比如,联系名字叫做供应,那么这个属性就可以是数量,来代表供货量
+ 父类型 和子类型: 用三角形来表示,学生是父类,一年级学生就是子类,注意这种类似于继承关系的表示,适用于 子类继承父类所以的属性,同时子类有自己的属性扩展
+ 父类型和子类型:还有其中自己的用细节
+ 强实体型和弱实体型:如果一个实体依赖于其他实体而存在他就叫弱实体,不依赖别的实体的就叫强实体. 例如 还款就是弱实体,他依赖于贷款这个实体,你贷款都没了,哪里还有还款一词.
+ 双矩形 表示弱实体,双菱形表示强实体

### E -R 图表中的各个实体间的关系
+ 一对一联系 :学生和学号
+ 一对多联系 : 课程和学生
+ 多对多联系: 老师和学生,一个老师可以教多个学生,一个学生可以被多个老师教.
+ 菱形代表联系,但是菱形两端往往会有数字, 他约束了具体的数量, 比如 , 矩形1 - 菱形 -矩形2  ,这个是一组实体间的联系, 矩形1代表仓库 ,他和菱形之间为数字1 ,矩形2 为职工, 他和菱形之间数字为n ,这个就是一对多的关系,我们用数字解读他们的关系, 1个仓库有n个职工,为什么不是选择数字1而是数字n,因为数字n更加靠近职工实体,所以你可以得出规律,1个职工 只能管理 数字为1的仓库.

### E-R 图表的一些要求
+ 属性你不能再连接其他的属性,比如我们学生的性别,我在这个性别下面在连接两个属性 ,男女这两个属性,这样就违反了1nf,不能出现合并单元格的现象
+ 属性不能与其他实体之间有连线,如果你必须连线,你可以考虑把属性变为另一个实体

### E-R 图表之间的合并

+ 我们要为一个企业设计一个数据库,我们每个部门都当做一个实体,那么你肯定得把这些实体和属性组成的树合并到一起去.
  
#### E-R 各个子系统之间主要有三类合并的冲突
+ 属性域冲突 : 取值范围不同的冲突
+ 命名冲突 : 同名异义  异名同义 
+ 结构冲突 : 1. 在一个局部应用中被当做属性,而在另一边又被当做实体,2. 同一实体 在不同子系统中 所包含的属性个数和属性的排列次序普通, 3. 实体间的联系不同,同一实体 有的是一对多,而在另一边是多对多
  
#### 合并后的E-R图中可能出现 冗余数据和冗余的联系
+ 消除了冗余的E-R图我们就叫做基本E-R图
+ 如何消除 利用范式
+ 但是有些数据可能出现冗余,但是它能够提升我们数据库的查询速度,我们可以保存,比如,我们关于成绩的平均数,这个平均数,你可以求和然后在除以人数得出,所以平均数是一个冗余信息,但是我们很多老师经常需要这个数据,我们不妨把它保存来提示查询速度 
### UML表格化是跟E-R 图表类似的功能.
+ E-R图表有一个问题,就是我们在连接属性和实体的时候,属性一多,这个连接后的就像一颗大树,杂乱无章
+ 而UML 使用类似于基本表的格式来代替这一个树的.

---

## 第三步 逻辑结构设计(把E-R图变成我们数据库需要的关系表结构)
+ 我们需要对于实体和联系来转换
+ 实体 我们直接构建需要的表 ,在其中添加属性
+ 对于联系 有几种形式,但是我们大体分为一对多(包括一对一)和多对多(包括三个以上的多对多的关系)
+ 一对多: 例如我们厂房和员工之间的关系,一个厂房对应多个员工,我们把联系中对多的实体(员工)建表,然后把厂房当做属性插入到这个表中,就完成了E-R子系统的转换
+ 多对多:我们把联系连接的各个实体的实体名都当做表的候选码,在后面加上联系的属性,不当做候选码,这些实体名一起组成表的主码.
  
### 模型优化
+ 并不是范式的等级越高越好,我们要选取合适的范式等级

---

## 第四步 物理结构设计
+ 这一步我们主要让表的数据如何存储和如何高效的读取
  
### 提升查询速度的手段
+ 建立B+树 :他有自己的建立适用的条件 p236
+ hash树 : 数据不能变    p236
+ 聚簇 :让经常需要查询的数据存储到同一盘去,这样就能加快查询速度.

### 数据库的存储结构
+ 把数据分为易变部分和稳定部分,经常存取部分,存取频率低的部分
+ 还有配置系统的提供的参数,比如分配容量大小
  
---
### 第四步 数据库的实施和维护
+ 数据库他是一个长期维护的过程,才能保证他的高效和满足用户的需求
+ 就比如审计,你就得请人来看
+ 还有数据库会产生冗余数据和冗余联系,这些都需要清理.